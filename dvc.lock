schema: '2.0'
stages:
  make_dataset:
    cmd: python3 src/data/make_dataset.py -c house-prices-advanced-regression-techniques
      -tr train.csv -te test.csv -o ./data/raw
    deps:
    - path: src/data/make_dataset.py
      md5: 66a8797f0ed1afb96a0cf8f024251bd9
      size: 1654
    outs:
    - path: data/raw/test.csv
      md5: dcec4b79bf9c7317bd9e17789bf888f0
      size: 451405
    - path: data/raw/train.csv
      md5: 80ccab65fb115cbad143dbbd2bcd5577
      size: 460676
  encode_labels:
    cmd: python3 src/data/encode_labels.py -tr data/interim/train_nan_imputed.csv
      -te data/interim/test_nan_imputed.csv -o data/interim
    deps:
    - path: data/interim/test_nan_imputed.csv
      md5: bd380d75d6472c078361ef727a353e80
      size: 580002
    - path: data/interim/train_nan_imputed.csv
      md5: 2980c1808a300ce0c0940f5838cd679c
      size: 584918
    - path: src/data/encode_labels.py
      md5: 76b218a8b59bc30c58534c362225b052
      size: 3199
    params:
      params.yaml:
        encoding:
          binary_to_numerical_cols:
          - CentralAir
    outs:
    - path: data/interim/test_categorized.csv
      md5: 63c9de807e983f07359daa6f0357ca6b
      size: 1921824
    - path: data/interim/train_categorized.csv
      md5: ab638ccee5a10ec25e72b47137418793
      size: 1923959
  impute_nan:
    cmd: python3 src/data/replace_nan.py -tr data/interim/train_outliers_removed.csv
      -te data/interim/test_outliers_removed.csv -o data/interim
    deps:
    - path: data/interim/test_outliers_removed.csv
      md5: a95186cee997d3feb964f1f14e167c61
      size: 489843
    - path: data/interim/train_outliers_removed.csv
      md5: 55a4ea116d519cfb280e3bcb6efcb37a
      size: 474361
    - path: src/data/replace_nan.py
      md5: 4dd325f4ddec6a24a153839cd964d66c
      size: 2323
    params:
      params.yaml:
        ignore_cols:
        - Id
        - SalePrice
        imputation:
          method: mean
    outs:
    - path: data/interim/test_nan_imputed.csv
      md5: bd380d75d6472c078361ef727a353e80
      size: 580002
    - path: data/interim/train_nan_imputed.csv
      md5: 2980c1808a300ce0c0940f5838cd679c
      size: 584918
  remove_outliers:
    cmd: python3 src/data/remove_outliers.py -tr data/raw/train.csv -te data/raw/test.csv
      -o data/interim
    deps:
    - path: data/raw/test.csv
      md5: dcec4b79bf9c7317bd9e17789bf888f0
      size: 451405
    - path: data/raw/train.csv
      md5: 80ccab65fb115cbad143dbbd2bcd5577
      size: 460676
    - path: src/data/remove_outliers.py
      md5: 4e565121d319f1720f7f8441d394513a
      size: 1805
    params:
      params.yaml:
        is_drop_outlier: true
        target_class: SalePrice
    outs:
    - path: data/interim/test_outliers_removed.csv
      md5: a95186cee997d3feb964f1f14e167c61
      size: 489843
    - path: data/interim/train_outliers_removed.csv
      md5: 55a4ea116d519cfb280e3bcb6efcb37a
      size: 474361
  skew_data:
    cmd: python3 src/data/skew_data.py -tr data/interim/train_categorized.csv -te
      data/interim/test_categorized.csv -o data/interim
    deps:
    - path: data/interim/test_categorized.csv
      md5: 63c9de807e983f07359daa6f0357ca6b
      size: 1921824
    - path: data/interim/train_categorized.csv
      md5: ab638ccee5a10ec25e72b47137418793
      size: 1923959
    - path: src/data/skew_data.py
      md5: 904fca2f763d16c37f34517658e97055
      size: 2033
    params:
      params.yaml:
        skew:
          is_transform: true
          threshold: 0.5
    outs:
    - path: data/interim/test_skewed.csv
      md5: 3d2b479225b23132cfc1f4a522a40ddd
      size: 4033440
    - path: data/interim/train_skewed.csv
      md5: 09140f22d3bac288d9dc5a2a5d132c34
      size: 4031902
  train_model:
    cmd: python3 src/models/train_model.py -tr data/interim/train_skewed.csv -rd ./results
      -md ./models
    deps:
    - path: data/interim/train_skewed.csv
      md5: 09140f22d3bac288d9dc5a2a5d132c34
      size: 4031902
    - path: src/models/train_model.py
      md5: b3f29cc0be33dfb2d2c97caf6654f988
      size: 3532
    params:
      params.yaml:
        model_params:
          xgb_regressor:
            colsample_bytree: 0.4603
            gamma: 0.0468
            learning_rate: 0.05
            max_depth: 3
            min_child_weight: 1.7817
            n_estimators: 2200
            reg_alpha: 0.464
            reg_lambda: 0.8571
            subsample: 0.5213
            silent: 1
          svr:
            C: 11
            epsilon: 0.009
            gamma: 0.0003
            kernel: rbf
          lasso:
            alpha: 0.0005
            max_iter: 10000
          ridge:
            alpha: 35.0
          kernel_ridge:
            alpha: 0.4
            coef0: 1
            degree: 3
            kernel: polynomial
          elastic_net:
            alpha: 0.004
            l1_ratio: 0.1
            max_iter: 10000
          gradient_boosting_regressor:
            n_estimators: 3000
            learning_rate: 0.05
            max_depth: 4
            max_features: sqrt
            min_samples_leaf: 15
            min_samples_split: 10
            loss: huber
            random_state: 5
        target_class: SalePrice
